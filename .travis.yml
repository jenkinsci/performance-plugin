language: java
jdk:
  - openjdk11
#before_install:
#- sudo apt-get update
#- sudo apt-get install python3 python3-pip python3-setuptools
install:
- pip3 install bzt --user
- "mvn -Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.transfer.Slf4jMavenTransferListener=warn -Dmaven.test.skip=true clean install --batch-mode -X"
script: "mvn -Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.transfer.Slf4jMavenTransferListener=warn -Djava.awt.headless=true -Dmaven.test.redirectTestOutputToFile=true -Dcobertura.report.format=xml --fail-at-end --batch-mode cobertura:cobertura test"
after_success:
- cobertura:dump-datafile
- bash <(curl -s https://codecov.io/bash)
os: linux
dist: focal
